# Task ID: 8
# Title: OCR 기능 구현
# Status: done
# Dependencies: 4
# Priority: medium
# Description: 카메라로 촬영하거나 갤러리에서 선택한 이미지의 텍스트를 인식하여 일기에 추가하는 기능을 구현합니다.
# Details:
1. 필요 패키지:
   - google_mlkit_text_recognition: ^0.10.0
   - image_picker: ^1.0.4
   - camera: ^0.10.5+5
2. OCR 서비스 구현 (services/ocr_service.dart):
   - 이미지에서 텍스트 추출
   - 텍스트 후처리 및 정렬
3. 카메라 화면 구현 (screens/camera_screen.dart):
   - 실시간 텍스트 인식 표시
   - 촬영 버튼
   - 갤러리 접근 버튼
4. 이미지 선택 기능 (갤러리 접근)
5. 인식된 텍스트 편집 화면:
   - 텍스트 블록 단위 편집
   - 자동 줄바꿈 조정
6. 한글 인식 최적화 (ML Kit Korean 모델 사용)
7. 카메라 및 갤러리 권한 관리
8. 이미지 전처리 (대비 향상, 노이즈 제거)

# Test Strategy:
1. 다양한 필기체 인식 테스트
2. 다양한 조명 환경에서의 인식 테스트
3. 이미지 품질에 따른 인식률 테스트
4. 권한 요청 및 처리 테스트
5. 메모리 사용량 모니터링
6. 대용량 텍스트 처리 성능 테스트
7. 다양한 기기에서의 카메라 호환성 테스트

# Subtasks:
## 1. OCR 서비스 구현 [done]
### Dependencies: None
### Description: 이미지에서 텍스트를 추출하고 후처리하는 OCR 서비스 클래스를 구현합니다.
### Details:
1. google_mlkit_text_recognition 패키지 통합
2. 이미지에서 텍스트 추출 기능 구현
3. 텍스트 블록 정렬 및 후처리 로직 개발
4. 한글 인식 최적화 (ML Kit Korean 모델 사용)
5. 텍스트 추출 결과 포맷팅 기능 구현
6. 이미지 전처리 기능 (대비 향상, 노이즈 제거) 구현

## 2. 카메라 화면 구현 [done]
### Dependencies: 8.1
### Description: 실시간 텍스트 인식 및 촬영 기능을 제공하는 카메라 화면을 구현합니다.
### Details:
1. camera 패키지를 사용한 카메라 화면 구현
2. 실시간 텍스트 인식 표시 기능 개발
3. 촬영 버튼 및 갤러리 접근 버튼 구현
4. 카메라 설정 (해상도, 플래시 등) 기능 추가
5. 카메라 프리뷰 화면에 텍스트 인식 영역 표시
6. 카메라 화면 UI/UX 최적화

## 3. 갤러리 접근 및 이미지 선택 기능 [done]
### Dependencies: 8.1
### Description: 기기의 갤러리에 접근하여 이미지를 선택하고 OCR 처리할 수 있는 기능을 구현합니다.
### Details:
1. image_picker 패키지를 사용한 갤러리 접근 구현
2. 이미지 선택 UI 개발
3. 선택된 이미지 미리보기 기능
4. 다중 이미지 선택 지원
5. 이미지 크롭 기능 추가
6. 선택된 이미지의 OCR 처리 연동

## 4. 인식된 텍스트 편집 화면 구현 [done]
### Dependencies: 8.1, 8.2, 8.3
### Description: OCR로 인식된 텍스트를 편집하고 일기에 추가할 수 있는 편집 화면을 구현합니다.
### Details:
1. 인식된 텍스트 표시 UI 개발
2. 텍스트 블록 단위 편집 기능 구현
3. 자동 줄바꿈 조정 기능 개발
4. 텍스트 스타일링 옵션 제공
5. 편집된 텍스트 저장 및 일기 추가 기능 연동
6. 텍스트 편집 히스토리 관리 (실행 취소/다시 실행)

## 5. 권한 관리 시스템 구현 [done]
### Dependencies: None
### Description: 카메라 및 갤러리 접근 권한을 관리하고 사용자에게 적절한 권한 요청을 처리하는 시스템을 구현합니다.
### Details:
1. 카메라 권한 요청 및 확인 로직 구현
2. 갤러리(사진) 접근 권한 요청 및 확인 로직 구현
3. 권한 거부 시 안내 다이얼로그 개발
4. 권한 설정 화면으로 이동 기능 추가
5. 권한 상태 모니터링 및 앱 실행 중 변경 처리
6. 권한 관련 사용자 경험 최적화

## 6. OCR 성능 최적화 및 테스트 [done]
### Dependencies: 8.1, 8.2, 8.3, 8.4, 8.5
### Description: 다양한 환경과 조건에서 OCR 기능의 성능을 최적화하고 테스트합니다.
### Details:
1. 다양한 필기체 인식 테스트 및 최적화
2. 다양한 조명 환경에서의 인식률 개선
3. 이미지 품질에 따른 인식 성능 최적화
4. 메모리 사용량 최적화
5. 대용량 텍스트 처리 성능 개선
6. 다양한 기기에서의 호환성 테스트 및 개선

