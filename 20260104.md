# EveryDiary 업데이트 기록 (2026.01.04)

## V1.0.8 (2026.01.04)
### AI 생성 콘텐츠 정책 반영
Google Play AI 생성 콘텐츠 정책 준수를 위한 신고 기능 추가

#### 주요 변경사항
- **AI 콘텐츠 신고 기능 추가**
  - 신규 파일: `lib/features/diary/widgets/ai_content_report_dialog.dart`
  - 일기 상세 화면의 AI 이미지 영역에 빨간색 깃발 아이콘 신고 버튼 추가
  - 신고 사유 선택: 부적절한 콘텐츠, 불쾌감을 주는 콘텐츠, 오해를 불러일으키는 콘텐츠, 저작권 침해, 기타
  - 이메일을 통한 신고 접수 (window98se@gmail.com)

- **신고 다이얼로그 UI/UX 개선**
  - 다이얼로그 상단에 이미지 썸네일(60x60)과 동의 체크박스 배치
  - 프롬프트 정보 표시 (생성 이력/캐시에서 자동 조회)
  - `share_plus` 패키지를 통한 이미지 첨부 기능
  - 이미지 첨부 동의 시 원본 이미지가 이메일에 첨부됨

#### 수정된 파일
- `pubspec.yaml`: 버전 1.0.7+10 → 1.0.8+11, share_plus 패키지 추가
- `lib/features/diary/widgets/ai_content_report_dialog.dart`: 신규 생성 및 UI 개선
- `lib/features/diary/screens/diary_detail_screen.dart`:
  - 빨간색 신고 버튼 추가
  - 저장된 이미지의 프롬프트 조회 로직 추가 (`_showReportDialogForSavedImage()`)
  - 생성 이력/캐시에서 프롬프트 자동 검색
- `lib/features/settings/screens/settings_screen.dart`: 버전 정보 업데이트
- `lib/core/l10n/app_localizations.dart`: 신고 관련 번역 추가 (5개 언어)

#### 추가된 로컬라이제이션 키
```
report_ai_content, report_description, report_select_reason,
report_reason_inappropriate, report_reason_offensive, report_reason_misleading,
report_reason_copyright, report_reason_other, report_additional_details,
report_details_hint, report_submit, report_submitted, report_error,
report_email_error, report_email_subject, report_reason, report_details,
report_no_details, report_image_info, report_image_preview, report_prompt_label,
report_agree_share_image, report_send_to, version_1_0_8_title, version_1_0_8_change_1
```

#### 기술적 세부사항
- 신고 버튼: `Icons.flag` (빨간색, `theme.colorScheme.error`)
- 이미지 공유: `share_plus` 패키지의 `Share.shareXFiles()` 사용
- 프롬프트 조회: `ImageGenerationService.getGenerationHistory()` 및 `getCachedResult()` 활용

---

## V1.0.7 (2026.01.03)
### 버그 수정
- 홈 화면 배경 이미지 갱신 시 UI가 사라지는 버그 수정

---

## V1.0.6 (2025.12.xx)
### 주요 변경사항
- 앱 실행 시 인트로 영상 추가
- AdMob 정책 검토 기간 중 매일 AI 이미지 생성 2회 자동 초기화
- 코드 최적화 및 안정성 개선

---

## 빌드 정보
- **빌드 도구**: Flutter
- **출력 파일**: `EverydiaryLite_v1.0.8.aab` (102.4MB)
- **빌드 명령어**: `flutter build appbundle --release`

## 향후 작업 시 참고사항
1. 버전 업데이트 시 수정 필요 파일:
   - `pubspec.yaml` (version 필드)
   - `lib/features/settings/screens/settings_screen.dart` (버전 표시 및 다이얼로그)
   - `lib/core/l10n/app_localizations.dart` (버전 변경사항 번역 - 5개 언어)

2. 로컬라이제이션 파일 구조:
   - 한국어: 약 30~350줄
   - 영어: 약 850~1250줄
   - 일본어: 약 1700~2100줄
   - 중국어 간체: 약 2550~2950줄
   - 중국어 번체: 약 3400~3800줄

3. AI 이미지 관련 화면:
   - `lib/features/diary/screens/diary_detail_screen.dart`
   - `_buildAssociationImage()`: 실시간 생성 이미지
   - `_buildSavedAssociationImages()`: 저장된 이미지
   - `_showReportDialog()`: 생성 이미지 신고
   - `_showReportDialogForSavedImage()`: 저장된 이미지 신고 (프롬프트 자동 조회)

4. 신고 기능 관련:
   - 신고 다이얼로그: `lib/features/diary/widgets/ai_content_report_dialog.dart`
   - 이미지 첨부: `share_plus` 패키지 사용
   - 개발자 이메일: window98se@gmail.com

5. 개발자 연락처: window98se@gmail.com
